!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){var b;b=function(){return b=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;p=this,l=function(a){var b;return b=p.$elem.data("selectnice"),"undefined"!=typeof a?b[a]:b},q=function(a){k(a).prop("selected",!0),p.$elem.change()},r=function(a){k(a).prop("selected",!1),p.$elem.change()},k=function(b){return a.isNumeric(b)&&(b=Math.floor(b)),a("option[value="+b+"]",p.$elem)},h=function(){p.$ulsearch.on("click",function(a){a.preventDefault(),p.$inputsearch.focus()})},e=function(){var a;a=p.$ullist,p.$inputsearch.on("focus",function(){a.show(),m()}),p.$inputsearch.on("focusout",function(){return a.find("li:hover").length<=0?a.hide():void 0})},m=function(){var b,c;c=p.$inputsearch.val(),c=c.toLowerCase(),c=c.replace(/\s+/g,""),b=p.$ullist,p.options.multiple||b.find("li a").removeClass(p.options.selectedclass),b.find("li").each(function(){var b,d;b=a(this).text(),d=-1!==b.toLowerCase().replace(/\s+/g,"").indexOf(c),a(this).toggle(d)}),b.is(":visible")||""===c||b.show(),b.find("li:visible a."+p.options.hoverclass).length<=0&&(b.find("li a").removeClass(p.options.hoverclass),b.find("li:visible a").first().addClass(p.options.hoverclass),b.scrollTop(0)),""!==c&&p.options.onSearch.call(p,c,b.find("li:visible a").length)},d=function(b){b.on("click",function(b){var c;b.preventDefault(),b.stopPropagation(),c=a(this).closest("li").attr("data-niceselect-value"),p.$ullist.find("a[data-niceselect-value='"+c+"']").trigger("click")})},f=function(){var b;return b=p.$ullist.find("a"),b.on("mouseenter",function(){var b,c,d;return b=a(this),d=b.data("niceselect-value"),c=b.data("niceselect-text"),p.options.onHover.call(p,d,c),p.options.rating?(b.addClass(p.options.ratingclass).closest("li").prevAll().find("a").addClass(p.options.ratingclass),b.addClass(p.options.ratingclass).closest("li").nextAll().find("a").removeClass(p.options.ratingclass)):void 0})},g=function(){var b;b=p.$ullist.find("a"),b.on("mouseleave",function(){var c;return c=a(this),p.options.rating?b.removeClass(p.options.ratingclass):void 0})},b=function(b){var c,e;c=a("<li />",{"data-niceselect-value":b.data("niceselect-value"),"data-niceselect-text":b.data("niceselect-text")}),e=a("<span />",{html:b.data("niceselect-text")}),b=a("<a />",{"class":"closeelementlist",href:"#",html:"x"}),c.append(e),c.append(b),p.$ulsearch.find("li").last().before(c),d(b)},n=function(a){var b;b=a.attr("data-niceselect-value"),p.$ulsearch.find("[data-niceselect-value='"+b+"']").remove()},c=function(){var c;c=p.$ullist.find("a"),c.on("mouseover",function(b){"search"===p.options.type&&(c.removeClass(p.options.hoverclass),a(this).addClass(p.options.hoverclass))}),c.on("click",function(d){var e,f,g,h;d.preventDefault(),e=a(this),h=e.attr("data-niceselect-value"),g=e.attr("data-niceselect-text"),f=!0,p.options.multiple?e.hasClass(p.options.selectedclass)&&(e.removeClass(p.options.selectedclass),r(h),f=!1,"search"===p.options.type&&n(e)):c.removeClass(p.options.selectedclass),f&&(e.addClass(p.options.selectedclass),q(h),p.options.multiple&&"search"===p.options.type&&b(e),p.options.onSelect.call(p,h,g,d)),"search"===p.options.type&&(g=p.options.multiple?"":g,p.$inputsearch.val(g),p.options.multiple&&p.$inputsearch.focus(),e.closest("ul").hide()),p.options.rating&&e.closest("li").prevAll().find("a").addClass(p.options.selectedclass)})},o=function(){var b;b=p.$ullist,p.$inputsearch.on("keydown",function(c){var d,e,f;8===c.keyCode&&(b.find("a").removeClass(p.options.hoverclass),b.find("li:visible").first().find("a").addClass(p.options.hoverclass),b.scrollTop(0),f=a(this).val(),""===f&&(d=p.$ulsearch.find("li").last().prev(),d.length>0&&(e=d.attr("data-niceselect-value"),b.find("a[data-niceselect-value='"+e+"']").trigger("click")))),13===c.keyCode&&(c.preventDefault(),d=b.find("li:visible a."+p.options.hoverclass).first(),d.trigger("click"),p.options.multiple||a(this).blur())}),p.$inputsearch.on("keyup",function(a){var c,d;if(40===a.keyCode){if(c=b.find("li:visible a."+p.options.hoverclass).first(),b.is(":visible")||b.show(),c.length<=0&&b.find("li:visible").length>0)return b.scrollTop(0),b.find("li:visible a").first().addClass(p.options.hoverclass),c=b.find("li:visible a."+p.options.hoverclass).first();if(c.length>0)return b.find("li a").removeClass(p.options.hoverclass),d=c.closest("li").nextAll("li:visible").length<=0?b.find("li:visible a").first():c.closest("li").nextAll("li:visible").first().find("a").first(),d.addClass(p.options.hoverclass),b.scrollTop(b.scrollTop()+d.closest("li").position().top-b.height()/2+d.closest("li").height()/2)}else{if(38!==a.keyCode)return m();if(c=b.find("li:visible a."+p.options.hoverclass).first(),b.is(":visible")||b.show(),c.length<=0&&b.find("li:visible").length>0)return b.scrollTop(b.prop("scrollHeight")),b.find("li:visible a").last().addClass(p.options.hoverclass),c=b.find("li:visible a."+p.options.hoverclass).last();if(c.length>0)return b.find("li a").removeClass(p.options.hoverclass),d=c.closest("li").prevAll("li:visible").length<=0?b.find("li:visible a").last().first():c.closest("li").prevAll("li:visible").first().find("a").first(),d.addClass(p.options.hoverclass),b.scrollTop(b.scrollTop()+d.closest("li").position().top-b.height()/2+d.closest("li").height()/2)}})},j=function(b){p.$elem.find("option").each(function(c){return function(c,d){var e;a(d).is(":selected")&&(e=b.find("a[data-niceselect-value='"+a(d).val()+"']"),e.addClass(p.options.selectedclass),p.options.rating&&e.closest("li").prevAll().find("a").addClass(p.options.selectedclass))}}(this))},i=function(){var b,i,k,l,m;return p.$widget=a("<div />",{"class":"ns-widget"}),m=a("<ul />",{"class":p.options.theme}),"search"===p.options.type&&(l=a("<div />",{"class":p.options.theme}),m.attr("class","ul-list"),i=a("<ul />",{"class":"ul-search"}),k=a("<input />",{type:"text",name:"niceselect-search"}),b=a("<li />",{"class":"niceselect-search-input"}),b.append(k),i.append(b),l.append(i),m.hide()),p.$elem.find("option").each(function(c){return function(c,d){var e,f,g,h,i;i=a(d).val(),i&&(g=a(d).text(),f=a(d).data("html"),f&&(g=f),h=p.options.showtext===!1?"":g,e=a("<a />",{href:"#","data-niceselect-value":i,"data-niceselect-text":g,html:h}),b=a("<li />").append(e),m.append(b))}}(this)),j(m),"search"===p.options.type?(l.append(m),p.$widget.append(l)):p.$widget.append(m),p.$elem.before(p.$widget),p.$ulsearch=p.$widget.find("ul").first(),p.$ullist=p.$widget.find("ul").last(),p.$inputsearch=p.$widget.find("input"),c(),f(),g(),"search"===p.options.type?(e(),o(),p.options.multiple&&p.$inputsearch.autoGrowInput({minWidth:100,maxWidth:function(b){return function(){return a(".niceselect-search-input").width()-25}}(this),comfortZone:10}),p.options.multiple&&d(p.$widget.find("ul").first().find("a")),h()):void 0},this.show=function(){l()||(i(),this.$elem.hide())}},b.prototype.init=function(b,c){return this.$elem=a(c),this.options=a.extend({},a.fn.selectnice.defaults,b),this.options.multiple=!!a(c).attr("multiple"),a.each(this.$elem.data(),function(a){return function(b,c){a.options[b]=c}}(this)),this.options},b}(),a.fn.selectnice=function(c,d){return this.each(function(){var e;if(e=new b,a(this).is("select")||a.error("Sorry, this plugin only works with select fields."),e.hasOwnProperty(c)){if(e.init(d,this),"show"===c)return e.show(d);if(e.$elem.data("selectnice"))return e.$widget=a(this).next(".ns-widget"),e[c](d)}else{if("object"==typeof c||!c)return d=c,e.init(d,this),e.show();a.error("Method "+c+" does not exist on jQuery.selectnice")}})},a.fn.selectnice.defaults={theme:"select-default",selectedclass:"selected",hoverclass:"onhover",ratingclass:"rating",showtext:!0,type:"select",rating:!1,multiple:!1,onSelect:function(a,b,c){},onHover:function(a,b){},onSearch:function(a,b){}},a.fn.selectnice.SelectNice=b});