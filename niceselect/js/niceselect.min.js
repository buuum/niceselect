!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){var b;b=function(){return b=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;r=this,l=function(a){var b;return b=r.$elem.data("selectnice"),"undefined"!=typeof a?b[a]:b},s=function(a){k(a).prop("selected",!0),r.$elem.change()},t=function(a){k(a).prop("selected",!1),r.$elem.change()},k=function(b){return a.isNumeric(b)&&(b=Math.floor(b)),a("option[value="+b+"]",r.$elem)},o=function(b){var c,d,e,f,g,h;f=b.parent().offset(),g=a(window).scrollTop(),e=f.top-g,c=b.parent().outerHeight(),d=a(window).height()-(e+c),b.css("max-height","none"),e>d&&b.height()>d?(b.css("max-height",e-10),h=-b.height(),b.css("top",h)):(b.css("max-height",d-10),b.css("top",c))},u=function(a){a.is(":visible")||(r.$ulsearch.addClass("focus"),a.show()),o(a)},m=function(a){a.hide(),r.$ulsearch.removeClass("focus")},h=function(){r.$ulsearch.on("click",function(a){a.preventDefault(),r.$ullist.is(":visible")||r.$inputsearch.is(":focus")?r.$ullist.is(":visible")?!r.$inputsearch.is(":focus")&&r.$ullist.is(":visible")?m(r.$ullist):r.$ullist.is(":visible")&&r.$inputsearch.is(":focus")&&m(r.$ullist):u(r.$ullist):(u(r.$ullist),r.$inputsearch.focus())})},e=function(){var a;a=r.$ullist,r.$inputsearch.on("focusout",function(){return!r.$ullist.is(":visible")||r.$ulsearch.is(":hover")||r.$ullist.is(":hover")?void 0:m(a)})},n=function(){var b,c,d;d=r.$inputsearch.val(),d=d.toLowerCase(),d=d.replace(/\s+/g,""),b=r.$ullist,r.options.multiple||b.find("li a").removeClass(r.options.selectedclass),b.find("li").each(function(){var b,c;b=a(this).text(),c=-1!==b.toLowerCase().replace(/\s+/g,"").indexOf(d),a(this).toggle(c)}),""!==d&&u(b),b.find("li:visible a."+r.options.hoverclass).length<=0&&(b.find("li a").removeClass(r.options.hoverclass),b.find("li:visible a").first().addClass(r.options.hoverclass),b.scrollTop(0)),b.find("li:visible").length<=0?(c=a("<li />",{"class":r.options.notfoundclass}),c.html(r.options.notfoundtext),b.append(c)):b.find("li."+r.options.notfoundclass).remove(),o(b),""!==d&&r.options.onSearch.call(r,d,b.find("li:visible a").length)},d=function(b){b.on("click",function(b){var c;b.preventDefault(),b.stopPropagation(),c=a(this).closest("li").attr("data-niceselect-value"),r.$ullist.find("a[data-niceselect-value='"+c+"']").trigger("click")})},f=function(){var b;return b=r.$ullist.find("a"),b.on("mouseenter",function(){var b,c,d;return b=a(this),d=b.data("niceselect-value"),c=b.data("niceselect-text"),r.options.onHover.call(r,d,c),r.options.rating?(b.addClass(r.options.ratingclass).closest("li").prevAll().find("a").addClass(r.options.ratingclass),b.addClass(r.options.ratingclass).closest("li").nextAll().find("a").removeClass(r.options.ratingclass)):void 0})},g=function(){var a;a=r.$ullist.find("a"),a.on("mouseleave",function(){return r.options.rating?a.removeClass(r.options.ratingclass):void 0})},b=function(b){var c,e;c=a("<li />",{"data-niceselect-value":b.data("niceselect-value"),"data-niceselect-text":b.data("niceselect-text")}),e=a("<span />",{html:b.data("niceselect-text")}),b=a("<a />",{"class":"closeelementlist",href:"#",html:"x"}),c.append(e),c.append(b),r.$inputsearch.attr("placeholder",""),r.$ulsearch.find("li").last().before(c),d(b)},p=function(a){var b;b=a.attr("data-niceselect-value"),r.$ulsearch.find("[data-niceselect-value='"+b+"']").remove(),r.$ulsearch.find("li").length<2&&r.$inputsearch.attr("placeholder",r.options.placeholder)},c=function(){var c;c=r.$ullist.find("a"),c.on("mouseover",function(){"search"===r.options.type&&(c.removeClass(r.options.hoverclass),a(this).addClass(r.options.hoverclass))}),c.on("click",function(d){var e,f,g,h;d.preventDefault(),e=a(this),h=e.attr("data-niceselect-value"),g=e.attr("data-niceselect-text"),f=!0,r.options.multiple?e.hasClass(r.options.selectedclass)&&(e.removeClass(r.options.selectedclass),t(h),f=!1,"search"===r.options.type&&p(e)):c.removeClass(r.options.selectedclass),f&&(e.addClass(r.options.selectedclass),s(h),r.options.multiple&&"search"===r.options.type&&b(e),r.options.onSelect.call(r,h,g,d)),"search"===r.options.type&&(g=r.options.multiple?"":g,r.$inputsearch.val(g),r.options.multiple&&r.$inputsearch.focus(),m(r.$ullist)),r.options.rating&&e.closest("li").prevAll().find("a").addClass(r.options.selectedclass)})},q=function(){var b;b=r.$ullist,r.$inputsearch.on("keydown",function(c){var d,e,f;8===c.keyCode&&(b.find("a").removeClass(r.options.hoverclass),b.find("li:visible").first().find("a").addClass(r.options.hoverclass),b.scrollTop(0),f=a(this).val(),""===f?(d=r.$ulsearch.find("li").last().prev(),d.length>0&&(e=d.attr("data-niceselect-value"),b.find("a[data-niceselect-value='"+e+"']").trigger("click")),1===d.length&&r.$inputsearch.css("width","100%")):o(b)),13===c.keyCode&&(c.preventDefault(),d=b.find("li:visible a."+r.options.hoverclass).first(),d.trigger("click"),r.options.multiple||a(this).blur())}),r.$inputsearch.on("keyup",function(a){var c,d;if(40===a.keyCode){if(c=b.find("li:visible a."+r.options.hoverclass).first(),b.find("li."+r.options.notfoundclass).remove(),u(b),c.length<=0&&b.find("li:visible").length>0)return b.scrollTop(0),b.find("li:visible a").first().addClass(r.options.hoverclass),c=b.find("li:visible a."+r.options.hoverclass).first();if(c.length>0)return b.find("li a").removeClass(r.options.hoverclass),d=c.closest("li").nextAll("li:visible").length<=0?b.find("li:visible a").first():c.closest("li").nextAll("li:visible").first().find("a").first(),d.addClass(r.options.hoverclass),b.scrollTop(b.scrollTop()+d.closest("li").position().top-b.height()/2+d.closest("li").height()/2)}else{if(38!==a.keyCode)return n();if(c=b.find("li:visible a."+r.options.hoverclass).first(),b.find("li."+r.options.notfoundclass).remove(),u(b),c.length<=0&&b.find("li:visible").length>0)return b.scrollTop(b.prop("scrollHeight")),b.find("li:visible a").last().addClass(r.options.hoverclass),c=b.find("li:visible a."+r.options.hoverclass).last();if(c.length>0)return b.find("li a").removeClass(r.options.hoverclass),d=c.closest("li").prevAll("li:visible").length<=0?b.find("li:visible a").last().first():c.closest("li").prevAll("li:visible").first().find("a").first(),d.addClass(r.options.hoverclass),b.scrollTop(b.scrollTop()+d.closest("li").position().top-b.height()/2+d.closest("li").height()/2)}})},j=function(b){r.$elem.find("option").each(function(c){return function(c,d){var e;a(d).is(":selected")&&(e=b.find("a[data-niceselect-value='"+a(d).val()+"']"),e.addClass(r.options.selectedclass),r.options.rating&&e.closest("li").prevAll().find("a").addClass(r.options.selectedclass))}}(this))},i=function(){var b,i,k,l,m;return r.$widget=a("<div />",{"class":"ns-widget"}),m=a("<ul />",{"class":r.options.theme}),"search"===r.options.type&&(l=a("<div />",{"class":r.options.theme}),m.attr("class","ul-list"),i=a("<ul />",{"class":"ul-search"}),k=a("<input />",{type:"text",name:"niceselect-search"}),r.options.placeholder&&k.attr("placeholder",r.options.placeholder),b=a("<li />",{"class":"niceselect-search-input"}),b.append(k),i.append(b),l.append(i),m.hide()),r.$elem.find("option").each(function(c){return function(c,d){var e,f,g,h,i;i=a(d).val(),i&&(g=a(d).text(),f=a(d).data("html"),f&&(g=f),h=r.options.showtext===!1?"":g,e=a("<a />",{href:"#","data-niceselect-value":i,"data-niceselect-text":g,html:h}),b=a("<li />").append(e),m.append(b))}}(this)),j(m),"search"===r.options.type?(l.append(m),r.$widget.append(l)):r.$widget.append(m),r.$elem.before(r.$widget),r.$ulsearch=r.$widget.find("ul").first(),r.$ullist=r.$widget.find("ul").last(),r.$inputsearch=r.$widget.find("input"),c(),f(),g(),"search"===r.options.type&&(h(),e(),q(),r.options.multiple&&r.$inputsearch.autoGrowInput({minWidth:100,maxWidth:function(b){return function(){return a(".niceselect-search-input").width()-25}}(this),comfortZone:10}),r.options.multiple)?d(r.$widget.find("ul").first().find("a")):void 0},this.show=function(){l()||(i(),this.$elem.hide())}},b.prototype.init=function(b,c){return this.$elem=a(c),this.options=a.extend({},a.fn.selectnice.defaults,b),this.options.multiple=!!a(c).attr("multiple"),a.each(this.$elem.data(),function(a){return function(b,c){a.options[b]=c}}(this)),this.options},b}(),a.fn.selectnice=function(c,d){return this.each(function(){var e;if(e=new b,a(this).is("select")||a.error("Sorry, this plugin only works with select fields."),e.hasOwnProperty(c)){if(e.init(d,this),"show"===c)return e.show(d);if(e.$elem.data("selectnice"))return e.$widget=a(this).next(".ns-widget"),e[c](d)}else{if("object"==typeof c||!c)return d=c,e.init(d,this),e.show();a.error("Method "+c+" does not exist on jQuery.selectnice")}})},a.fn.selectnice.defaults={theme:"select-default",selectedclass:"selected",hoverclass:"onhover",ratingclass:"rating",notfoundclass:"not-found",notfoundtext:"No results found",showtext:!0,placeholder:!1,type:"select",rating:!1,multiple:!1,onSelect:function(a,b,c){},onHover:function(a,b){},onSearch:function(a,b){}},a.fn.selectnice.SelectNice=b});