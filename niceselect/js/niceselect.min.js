!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){var b;b=function(){return b=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;n=this,j=function(a){var b;return b=n.$elem.data("selectnice"),"undefined"!=typeof a?b[a]:b},o=function(a){i(a).prop("selected",!0),n.$elem.change()},p=function(a){i(a).prop("selected",!1),n.$elem.change()},i=function(b){return a.isNumeric(b)&&(b=Math.floor(b)),a("option[value="+b+"]",n.$elem)},g=function(){n.$ulsearch.on("click",function(a){a.preventDefault(),n.$inputsearch.focus()})},e=function(){var a;a=n.$ullist,n.$inputsearch.on("focus",function(){a.show(),k()}),n.$inputsearch.on("focusout",function(){return a.find("li:hover").length<=0?a.hide():void 0})},k=function(){var b,c;c=n.$inputsearch.val(),c=c.toLowerCase(),c=c.replace(/\s+/g,""),b=n.$ullist,n.options.multiple||b.find("li a").removeClass(n.options.selectedclass),b.find("li").each(function(){var b,d;b=a(this).text(),d=-1!==b.toLowerCase().replace(/\s+/g,"").indexOf(c),a(this).toggle(d)}),b.is(":visible")||""===c||b.show(),b.find("li:visible a."+n.options.hoverclass).length<=0&&(b.find("li a").removeClass(n.options.hoverclass),b.find("li:visible a").first().addClass(n.options.hoverclass),b.scrollTop(0)),""!==c&&n.options.onSearch.call(n,c,b.find("li:visible a").length)},d=function(b){b.on("click",function(b){var c;b.preventDefault(),b.stopPropagation(),c=a(this).closest("li").attr("data-niceselect-value"),n.$ullist.find("a[data-niceselect-value='"+c+"']").trigger("click")})},f=function(){var b;return b=n.$ullist.find("a"),b.on("mouseenter",function(){var b,c,d;return b=a(this),d=b.data("niceselect-value"),c=b.data("niceselect-text"),n.options.onHover.call(n,d,c)})},b=function(b){var c,e;c=a("<li />",{"data-niceselect-value":b.data("niceselect-value"),"data-niceselect-text":b.data("niceselect-text")}),e=a("<span />",{html:b.data("niceselect-text")}),b=a("<a />",{"class":"closeelementlist",href:"#",html:"x"}),c.append(e),c.append(b),n.$ulsearch.find("li").last().before(c),d(b)},l=function(a){var b;b=a.attr("data-niceselect-value"),n.$ulsearch.find("[data-niceselect-value='"+b+"']").remove()},c=function(){var c;c=n.$ullist.find("a"),c.on("mouseover",function(b){"search"===n.options.type&&(c.removeClass(n.options.hoverclass),a(this).addClass(n.options.hoverclass))}),c.on("click",function(d){var e,f,g,h;d.preventDefault(),e=a(this),h=e.attr("data-niceselect-value"),g=e.attr("data-niceselect-text"),f=!0,n.options.multiple?e.hasClass(n.options.selectedclass)&&(e.removeClass(n.options.selectedclass),p(h),f=!1,"search"===n.options.type&&l(e)):c.removeClass(n.options.selectedclass),f&&(e.addClass(n.options.selectedclass),o(h),n.options.multiple&&"search"===n.options.type&&b(e),n.options.onSelect.call(n,h,g,d)),"search"===n.options.type&&(g=n.options.multiple?"":g,n.$inputsearch.val(g),n.options.multiple&&n.$inputsearch.focus(),e.closest("ul").hide())})},m=function(){var b;b=n.$ullist,n.$inputsearch.on("keydown",function(c){var d,e,f;8===c.keyCode&&(b.find("a").removeClass(n.options.hoverclass),b.find("li:visible").first().find("a").addClass(n.options.hoverclass),b.scrollTop(0),f=a(this).val(),""===f&&(d=n.$ulsearch.find("li").last().prev(),d.length>0&&(e=d.attr("data-niceselect-value"),b.find("a[data-niceselect-value='"+e+"']").trigger("click")))),13===c.keyCode&&(c.preventDefault(),d=b.find("li:visible a."+n.options.hoverclass).first(),d.trigger("click"),n.options.multiple||a(this).blur())}),n.$inputsearch.on("keyup",function(a){var c,d;if(40===a.keyCode){if(c=b.find("li:visible a."+n.options.hoverclass).first(),b.is(":visible")||b.show(),c.length<=0&&b.find("li:visible").length>0)return b.scrollTop(0),b.find("li:visible a").first().addClass(n.options.hoverclass),c=b.find("li:visible a."+n.options.hoverclass).first();if(c.length>0)return b.find("li a").removeClass(n.options.hoverclass),d=c.closest("li").nextAll("li:visible").length<=0?b.find("li:visible a").first():c.closest("li").nextAll("li:visible").first().find("a").first(),d.addClass(n.options.hoverclass),b.scrollTop(b.scrollTop()+d.closest("li").position().top-b.height()/2+d.closest("li").height()/2)}else{if(38!==a.keyCode)return k();if(c=b.find("li:visible a."+n.options.hoverclass).first(),b.is(":visible")||b.show(),c.length<=0&&b.find("li:visible").length>0)return b.scrollTop(b.prop("scrollHeight")),b.find("li:visible a").last().addClass(n.options.hoverclass),c=b.find("li:visible a."+n.options.hoverclass).last();if(c.length>0)return b.find("li a").removeClass(n.options.hoverclass),d=c.closest("li").prevAll("li:visible").length<=0?b.find("li:visible a").last().first():c.closest("li").prevAll("li:visible").first().find("a").first(),d.addClass(n.options.hoverclass),b.scrollTop(b.scrollTop()+d.closest("li").position().top-b.height()/2+d.closest("li").height()/2)}})},h=function(){var b,h,i,j,k;return n.$widget=a("<div />",{"class":"ns-widget"}),k=a("<ul />",{"class":n.options.theme}),"search"===n.options.type&&(j=a("<div />",{"class":"niceselect-search-div"}),h=a("<ul />"),i=a("<input />",{type:"text",name:"niceselect-search"}),b=a("<li />",{"class":"niceselect-search-input"}),b.append(i),h.append(b),j.append(h),n.$widget.append(j),k.hide()),n.$elem.find("option").each(function(c){return function(c,d){var e,f,g,h,i;i=a(d).val(),i&&(g=a(d).text(),f=a(d).data("html"),f&&(g=f),h=n.options.showtext===!1?"":g,e=a("<a />",{href:"#","data-niceselect-value":i,"data-niceselect-text":g,html:h}),a(d).is(":selected")&&e.addClass(n.options.selectedclass),b=a("<li />").append(e),k.append(b))}}(this)),n.$widget.append(k),n.$elem.before(n.$widget),n.$ulsearch=n.$widget.find("ul").first(),n.$ullist=n.$widget.find("ul").last(),n.$inputsearch=n.$widget.find("input"),c(),f(),"search"===n.options.type?(e(),m(),n.$inputsearch.autoGrowInput({minWidth:100,maxWidth:function(b){return function(){return a(".niceselect-search-input").width()-10}}(this),comfortZone:10}),n.options.multiple&&d(n.$widget.find("ul").first().find("a")),g()):void 0},this.show=function(){j()||(h(),this.$elem.hide())}},b.prototype.init=function(b,c){return this.$elem=a(c),this.options=a.extend({},a.fn.selectnice.defaults,b),this.options.multiple=!!a(c).attr("multiple"),a.each(this.$elem.data(),function(a){return function(b,c){a.options[b]=c}}(this)),this.options},b}(),a.fn.selectnice=function(c,d){return this.each(function(){var e;if(e=new b,a(this).is("select")||a.error("Sorry, this plugin only works with select fields."),e.hasOwnProperty(c)){if(e.init(d,this),"show"===c)return e.show(d);if(e.$elem.data("selectnice"))return e.$widget=a(this).next(".ns-widget"),e[c](d)}else{if("object"==typeof c||!c)return d=c,e.init(d,this),e.show();a.error("Method "+c+" does not exist on jQuery.selectnice")}})},a.fn.selectnice.defaults={theme:"select-default",selectedclass:"selected",hoverclass:"onhover",showtext:!0,type:"select",multiple:!1,onSelect:function(a,b,c){},onHover:function(a,b){},onSearch:function(a,b){}},a.fn.selectnice.SelectNice=b});